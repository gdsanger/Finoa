# Generated by Django 5.0.14 on 2025-11-22 16:11

from django.db import migrations


def update_vision_model(apps, schema_editor):
    """Update deprecated gpt-4-vision-preview to gpt-4o"""
    OpenAIConfig = apps.get_model('core', 'OpenAIConfig')
    OpenAIConfig.objects.filter(default_vision_model='gpt-4-vision-preview').update(
        default_vision_model='gpt-4o'
    )


def reverse_vision_model(apps, schema_editor):
    """Reverse migration - restore gpt-4-vision-preview"""
    OpenAIConfig = apps.get_model('core', 'OpenAIConfig')
    OpenAIConfig.objects.filter(default_vision_model='gpt-4o').update(
        default_vision_model='gpt-4-vision-preview'
    )


class Migration(migrations.Migration):

    dependencies = [
        ('core', '0004_documentupload'),
    ]

    operations = [
        migrations.RunPython(update_vision_model, reverse_vision_model),
    ]
